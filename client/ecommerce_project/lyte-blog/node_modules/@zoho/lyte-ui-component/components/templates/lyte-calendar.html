<template tag-name="lyte-calendar">
    <div class={{containerClass}} class="lyteCalendarPopup" ontouchstart={{action('record',event)}} ontouchend={{action('decide',event)}}>
        <div class='lyteCalendarView'>
            <div>
                <%if(navYield){%>
                    <lyte-yield yield-name="navigator"></lyte-yield>
                <%}else{%>
                    <div class='lyteCalendarNavigator'>
                        <% if(ifNotEquals(ltPropHeaderType,"dropdown")){ %>
                            <template is="if" value="{{ltPropYear}}">
                            <span case="true" class="lyteCalNav lyteCalyearNavLft" onclick="{{action('previous','Y',event)}}"></span>
                            </template>
                        <% } %>
                        <span class="lyteCalNav lyteCaldLft {{lyteUiDisableCalendarNav(viewDate,'previous')}}" onclick="{{action('previous','M',event)}}"></span>
                        <span class="lyteCalsCalMon">
                            <% if( ltPropHeaderType === 'dropdown' || ltPropHeaderType === 'picklist' ){ %>
                                <!-- <lyte-dropdown lt-prop-callout=true on-show={{method('setClass')}}  class="lyteCalMonthDD" lt-prop-options="{{monthNames}}" lt-prop-tabindex="1" on-option-selected="{{method('optionSelected','M')}}"></lyte-dropdown>
                                <lyte-dropdown lt-prop-callout=true on-show={{method('setClass')}}  class="lyteCalYearDD" lt-prop-options="{{years}}" lt-prop-tabindex="2" on-option-selected="{{method('optionSelected','Y')}}"></lyte-dropdown> -->

                                <lyte-dropdown lt-prop-freeze="false" lt-prop={{stringify(ltPropDropdown)}} on-show={{method('setClass')}}  class="lyteCalMonthDD" lt-prop-tabindex="1" on-option-selected="{{method('optionSelected','M')}}">
                                    <template is="registerYield" yield-name="yield">
                                        <lyte-drop-box>
                                            <lyte-drop-body>
                                                <% monthNames.forEach(function(item,index){ %>
                                                    <lyte-drop-item data-value={{item}}>{{item}}</lyte-drop-item>
                                                <% })%>
                                            </lyte-drop-body>
                                        </lyte-drop-box>
                                    </template>
                                </lyte-dropdown>
                                <% if( ltPropHeaderType === 'dropdown' ) { %>
                                    <lyte-dropdown lt-prop-freeze="false" lt-prop={{stringify(ltPropDropdown)}} on-show={{method('setClass')}}  class="lyteCalYearDD" lt-prop-tabindex="2" on-option-selected="{{method('optionSelected','Y')}}">
                                        <template is="registerYield" yield-name="yield">
                                            <lyte-drop-box>
                                                <lyte-drop-body>
                                                    <% years.forEach(function(item,index){ %>
                                                        <lyte-drop-item data-value={{item}}>{{item}}</lyte-drop-item>
                                                    <% })%>
                                                </lyte-drop-body>
                                            </lyte-drop-box>
                                        </template>
                                    </lyte-dropdown>
                                <% } else { %>
                                    <lyte-picklist lt-prop-options={{years}} lt-prop-dropdown='{"freeze": false, "callout": true, "tabindex": 2}' class="lyteCalYearDD" on-option-select="{{method('optionSelected','Y')}}" on-show={{method('setClass')}}>
                                    </lyte-picklist>
                                <% } %>

                            <% } else if( ltPropHeaderType === 'drilldown' ) { %>
                                <% if( viewType === 'dateView' ) { %>
                                     <span class="lyteDrillCalHeaderButton" onclick={{action('changeToMonthView',event)}}>
                                        <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span>
                                        <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span>
                                    </span>
                                <% } else if( viewType === 'monthView' ) { %>
                                    <span class="lyteDrillCalHeaderButton" onclick={{action('changeToDecadeView',event)}}>
                                        <span class="lyteCalsCalYear">{{currentYear}}</span>
                                    </span>
                                <% } else if( viewType === 'decadeView' ) { %>
                                    <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader">
                                        {{decadeStart}} - {{decadeEnd}}
                                    </span>
                                <% } %>
                            <% } else { %>
                                <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span>
                                <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span>
                            <% } %>
                        </span>
                        <span class="lyteCalNav lyteCaldRgt {{lyteUiDisableCalendarNav(viewDate,'next')}}" onclick="{{action('next','M',event)}}"></span>
                        <% if(ifNotEquals(ltPropHeaderType,"dropdown")){ %>
                            <template is="if" value="{{ltPropYear}}">
                                <span case="true" class="lyteCalNav lyteCalyearNavRgt" onclick="{{action('next','Y',event)}}"></span>
                            </template>
                        <% } %>
                    </div>
                <%}%>
                <!-- <div class="lyteCalTableContainerHeader">
                    
                </div> -->
            </div>
            <div class="lyteCalTableContainer">
                <% if(ltPropBodyYield) { %>
                    <lyte-yield yield-name="body"></lyte-yield>
                <% } else { %>
                    <% if( ltPropHeaderType !== 'drilldown' || ( ltPropHeaderType === 'drilldown' && viewType === 'dateView' ) ) { %>
                        <div class="lyteCalTableRowHeader">
                            <template is='for' items={{daysOfWeek}} item="day" indexval="idod">
                                <div class="lyteCalTableCellHeader">{{lyteUiI18n(day)}}</div>
                            </template>
                        </div>
                    <% } %>
                    <div class="lyteCalTableRowGroup">
                        <% if( ltPropHeaderType !== 'drilldown' ) { %>
                            <template is='for' items={{matrix}} item="vector" indexval="rowid">
                                <template is="if" value="{{lyteUiCheckEmpty(vector)}}">
                                    <template case="false">
                                        <div class="lyteCalTableRow">
                                            <template is='for' items={{vector}} item="date" indexval="cellid">
                                                <template is="if" value="{{lyteUiCheckInRange(ltPropMinDate,ltPropMaxDate,date.val,ltPropFormat)}}">
                                                    <template case="true">
                                                        <template is="if" value={{date.emptyBlock}}>
                                                            <template case="true">
                                                                <div class="lyteCalEmpty"></div>
                                                            </template>
                                                            <template case="false">
                                                                <div data-date={{date.val}} onclick="{{action('dateSelected',event)}}" class={{date.clsname}}><span class="lyteCalDateSpan">{{date.date}}</span></div>
                                                            </template>
                                                        </template>
                                                    </template>
                                                    <template case="false">
                                                        <template is="if" value={{date.emptyBlock}}>
                                                            <template case="true">
                                                                <div class="lyteCalEmpty"></div>
                                                            </template>
                                                            <template case="false">
                                                                <div data-date={{date.val}}  class={{date.clsname}}><span class="lyteCalDateSpan">{{date.date}}</span></div>
                                                            </template>
                                                        </template>
                                                    </template>
                                                </template>
                                            </template>
                                        </div>
                                    </template>
                                </template>
                            </template>
                        <% } else { %>
                            <% if( viewType === 'dateView' ) { %>
                                <template is='for' items={{matrix}} item="vector" indexval="rowid">
                                    <template is="if" value="{{lyteUiCheckEmpty(vector)}}">
                                        <template case="false">
                                            <div class="lyteCalTableRow">
                                                <template is='for' items={{vector}} item="date" indexval="cellid">
                                                    <template is="if" value="{{lyteUiCheckInRange(ltPropMinDate,ltPropMaxDate,date.val,ltPropFormat)}}">
                                                        <template case="true">
                                                            <template is="if" value={{date.emptyBlock}}>
                                                                <template case="true">
                                                                    <div class="lyteCalEmpty"></div>
                                                                </template>
                                                                <template case="false">
                                                                    <div data-date={{date.val}} onclick="{{action('dateSelected',event)}}" class={{date.clsname}}><span class="lyteCalDateSpan">{{date.date}}</span></div>
                                                                </template>
                                                            </template>
                                                        </template>
                                                        <template case="false">
                                                            <template is="if" value={{date.emptyBlock}}>
                                                                <template case="true">
                                                                    <div class="lyteCalEmpty"></div>
                                                                </template>
                                                                <template case="false">
                                                                    <div data-date={{date.val}}  class={{date.clsname}}><span class="lyteCalDateSpan">{{date.date}}</span></div>
                                                                </template>
                                                            </template>
                                                        </template>
                                                    </template>
                                                </template>
                                            </div>
                                        </template>
                                    </template>
                                </template>
                            <% } else if( viewType === 'monthView' ) { %>
                                <% monthViewData.forEach( function( row, rowIndex ) { %>
                                    <div class="lyteCalTableRow">
                                        <% row.forEach( function( column, columnIndex ) { %>
                                            <div onclick={{action('monthSelected',event)}} class={{column['class']}} class="lyteCalTableCell" data-date={{column['systemValue']}}>
                                                {{column['displayValue']}}
                                            </div>
                                        <% } ) %>
                                    </div>
                                <% } ) %>
                            <% } else if( viewType === 'decadeView' ) { %>
                                <% decadeViewData.forEach( function( row, rowIndex ) { %>
                                    <div class="lyteCalTableRow">
                                        <% row.forEach( function( column, columnIndex ) { %>
                                            <% if(!column.emptyBlock) { %>
                                                <div onclick={{action('yearSelected',event)}} class="lyteCalTableCell {{column.class}}" data-date={{column.year}}>
                                                    {{column.year}}
                                                </div>
                                            <% } else { %>
                                                <div class="lyteCalEmpty">

                                                </div>
                                            <% } %>
                                        <% } ) %>
                                    </div>
                                <% } )%>
                            <% } %>
                        <% } %>
                    </div>
                <% } %>
            </div>
            <div>
                <div class="lyteCalBtns">
                    <% if( showToday && ltPropShowToday ) { %>
                        <p class="lyteCalCurrentDate"><a onclick="{{action('today',event)}}">{{lyteUiI18n('today')}}</a></p>
                    <% } %>
                    <template is="if" value={{ltPropYield}}>
                        <template case="true">
                            <lyte-yield yield-name="footer"></lyte-yield>
                        </template>
                    </template>
                </div>
            </div>
        </div>
    </div>
</template>