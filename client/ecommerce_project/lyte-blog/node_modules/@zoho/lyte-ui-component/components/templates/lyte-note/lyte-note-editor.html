<template tag-name = "lyte-note-editor">
	<div class="lyteNoteFakeElement {{if(draftMode,'lyteNoteDraft','')}}" onclick="{{action('renderEditor',this)}}">
		<%if(draftMode){%>
			<div class="lyteNoteDraftWrapper">
				{{unescape(draftText,undefined,sanitizer.attr)}}
			</div>
		<%}else{%>
			<div class="lyteNotePlaceholder">
				{{ltPropTextEditor.placeholder||""}}
			</div>
		<%}%>
	</div>

	<%if(render){%>
		<div class="lyteNoteEditorWrapper" style="{{lyteNoteStyle( ltPropBackground, ltPropBorder)}}">
			<div class="lyteNoteTextEditorWrapper">
				<lyte-texteditor lt-prop = "{{stringify(ltPropTextEditor)}}" class = "lyteNoteMainEditor" on-trigger = "{{method('trigger')}}" on-focus = "{{method('focus')}}" on-blur = "{{method('blur')}}" on-paste = "{{method('paste')}}" id = {{randomId}} show-placeholder = {{lbind(isEmpty)}} on-select = "{{method('selection')}}"></lyte-texteditor>
				<div  lt-prop-tooltip-config = {{ltPropTooltipConfig}} lt-prop-title = {{ltPropText.noteBackground}} lt-prop-tooltip-class = "lyteNoteTooltip" class="lyteNoteBgSwitcher" onclick="{{action('common_action','bg_switch')}}"></div>
			</div>
			<%if(ltPropVoiceNote){%>
				<lyte-voicenote class = "lyteNotePreviewVoiceNote" id = {{ltPropVoiceNote.id}} lt-prop-src = {{ltPropVoiceNote.src}}></lyte-voicenote>
			<%}%>
			<div class="lyteNoteFileStatus {{showElement}}">
				<lyte-fileupload lt-prop = "{{stringify(ltPropFileUpload)}}" lt-prop-yield = true on-before-send = "{{method('beforeSend')}}" on-success = "{{method('success')}}" on-failure = "{{method('failure')}}" predefined-list = {{ltPropAttachments}} on-remove = "{{method('removeFile')}}" on-before-remove = "{{method('beforeRemove')}}" on-add = "{{method('addFile')}}">
					<template is = "registerYield" yield-name = "file">
						<lyte-file-select-area></lyte-file-select-area>
						<div class="lyteFileUpdList">
							<%predefinedList.forEach( function( item, index ){ %>
								<div class="lyteFileUpdListFile">
									<div class="lyteNoteFileUpdListInnerWrap">
										<div class="lyteFileUpdTypePreview">
											<% if(lyteUiImageFile(item)){ %>
													<img class="lyteFileUpdThumb" src={{item.src}}>
											<% } else{%>
												<span class="lyteFileUpdTypeIcon {{item.fileType}}"></span>
											<% } %>
										</div>
										<lyte-text lt-prop-tooltip-class = "lyteCommentFileNameTooltip" class = "lyteFileUpdFileName" lt-prop-value = {{item.name}} lt-prop-tooltip-config = {{ltPropTooltipConfig}}></lyte-text>
										<span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size, "", 1)}} )</span>
									</div>
									<lyte-file-close data-value = {{item.id}} class = {{item.status}}></lyte-file-close>
								</div>
							<% }) %>
						 	<% queueList.forEach( function( item, index ){ %>
						 		<div class="lyteFileUpdListFile {{item.status}}">
						 			<div class="lyteNoteFileUpdListInnerWrap">
							 			<div class="lyteFileUpdTypePreview">
								 			<% if(lyteUiImageFile(item)){ %>
								 					<img class="lyteFileUpdThumb" src={{item.src}}>
							 				<% } else{%>
							 					<span class="lyteFileUpdTypeIcon {{item.fileType}}"></span>
							 				<% } %>
						 				</div>
							 			<lyte-text lt-prop-tooltip-class = "lyteCommentFileNameTooltip" class = "lyteFileUpdFileName" lt-prop-value = {{item.name}} lt-prop-tooltip-config = {{ltPropTooltipConfig}}></lyte-text>
										 <span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size, "", 1)}} )</span>
									</div>
									 <%if(item.percentage != undefined){%>
										<div class="lyteFileUpdFileStatus" data-completed = {{item.percentage}}>
											<div class="lyteFileUpdProgressBar {{item.status}}">
												<div class="lyteFileUpdProgressFill" style="width: {{item.percentage}}%"></div>
											</div>
										</div>
						 			<%} if(item.status == "error" ){%>
						 				<lyte-file-retry data-value = {{item.id}}>
											<span class="lyteFileUpdFailMsg">{{ltPropText.failureMessage}}</span>
					 						<span class="lyteFileUpdRetryMsg">{{ltPropText.retryText}}</span>
						 				</lyte-file-retry>
									 <% } %>
									 <%if( item.status == "error" || item.status == "success" ){%>
										<lyte-file-close data-value = {{item.id}} class = {{item.status}}></lyte-file-close>
									<%}else{%>
										<span class="lyteNoteIndividualFilePercentage">{{item.percentage}}</span>
									<%}%>
						 		</div>
						 	<% }) %>
						  </div>
					</template>
				</lyte-fileupload>
				<%if(showStatus){%>
					<div class="lyteNoteFileUploadStatus {{showElement}}">
						<div class="lyteNoteUploadCountSection">
							<span class="lyteNoteSvgContainer">
								<svg viewBox = "0 0 100 100" width = "100%" height = "100%">
									<g class = "lyteNoteSvgGroup">
										<circle cx = 50 cy = 50 r = 40 class = "background_circle" stroke-dasharray = "314.16"></circle>
										<circle cx = 50 cy = 50 r = 40 class = "progress_circle" stroke-dasharray = "314.16" stroke-dashoffset = {{dashoffset}}></circle>
									</g>
								</svg>
							</span>
							<span class="lyteNoteUploadText">{{ltPropText.fileUpload}} :</span>
							<span class="lyteNoteUploadCount">
								<span class="lyteNoteUploadCountNumber">{{uploadedCount}}</span>
								/
								<span class="lyteNoteTotalCount">{{totalCount}}</span>
							</span>
							<span class="lyteNoteFileLimitMessage">{{ltPropText.limit}}</span>
						</div>
						<%if(ltPropFileUpload.totalFilesSize){%>
							<div class="lyteNoteUploadSize">
								<span class="lyteNoteSvgContainer">
									<svg viewBox = "0 0 100 100" width = "100%" height = "100%">
										<g class = "lyteNoteSvgGroup">
											<circle cx = 50 cy = 50 r = 20 class = "background_circle" stroke-dasharray = "125.66"></circle>
											<circle cx = 50 cy = 50 r = 20 class = "progress_circle" stroke-dasharray = "125.66" stroke-dashoffset = {{dashoffsetStorage}}></circle>
										</g>
									</svg>
								</span>
								<span class="lyteNoteSizeText">{{ltPropText.storage}} :</span>
								<span class="lyteNoteSizeValue">
									<span class="lyteNoteUploadSizeNumber">{{uploadedSize}}</span>
									/
									<span class="lyteNoteTotalSiza">{{totalSize}}</span>
								</span>
							</div>
						<%}%>
					</div>
				<%}%>
			</div>
			<div class="lyteNoteEditorFooter">
				<div class="lyteNoteFooterActions">
					<div lt-prop-tooltip-class = "lyteNoteTooltip" lt-prop-tooltip-config = {{ltPropTooltipConfig}} lt-prop-title = {{ltPropText.attachFiles}} class="lyteNoteFileUpload" onclick="{{action('trigger_upload',event)}}"></div>
					<span lt-prop-tooltip-class = "lyteNoteTooltip" lt-prop-tooltip-config = {{ltPropTooltipConfig}} lt-prop-title = {{ltPropText.smileyIcon}} class="lyteNoteSmileyIcon" onclick="{{action('common_action','show_smiley')}}"></span>
					<div class="lyteNoteIconHolder">
						<span class="lyteNoteEditorIcon lyteEditorPanelHidden" onclick="{{action('toggle_icon',this)}}"></span>
						<lyte-editorpanel class = 'lyteEditorHide lyteNoteEditorPanel{{ltPropEditorAnimation}}' lt-prop = {{stringify(ltPropEditorPanel)}} lt-prop-editor = "#{{randomId}}"></lyte-editorpanel>
					</div>
				</div>
				<div class="{{lyteUiAddShowClass(disabled,'lyteNoteCancelSaveWrap','lyteNoteButtonDisabled')}}">
					<%ltPropButtons.forEach(function( item, index ){%>
						<lyte-button class = {{item.class}} lt-prop= {{stringify(item.properties)}} lt-prop-disabled = {{item.properties.disabled}} onclick = "{{action('common_action',item.method)}}">
							<template is = "registerYield" yield-name = "text">
								{{item.text}}
							</template>
						</lyte-button>
					<%})%>
				</div>
			</div>
		</div>
	<%}%>
</template>