<template tag-name="lyte-connect" onmousedown="{{action('mousedown',event)}}" ontouchstart = "{{action('mousedown',event)}}" onscroll="{{action('scroll',event)}}" onkeydown="{{action('keydown',event)}}" tabindex="0">
	<div class="lyteConnectWrapper">
		<%ltPropData.forEach( function( item, index ){
			if( item.children ){%>
				<lyte-connect-item id = "{{ltPropIdPrefix}}{{item.id}}" class="lyteConnectGroupShape {{item.class}}" data-index = {{index}} lt-prop-item = "{{details[item.id]}}" style = "{{construct_style(item.position)}}">
					<%item.children.forEach(function( _item, _index ){%>
						<lyte-connect-item id = "{{ltPropIdPrefix}}{{_item.id}}" class = "lyteConnectInnerItem {{_item.class}}" data-index = {{_index}} style = "{{construct_style(_item.position)}}" onmouseenter = "{{action('mouseenter',this,event)}}" onmouseleave = "{{action('mouseleave',this,event)}}" lt-prop-item = "{{details[_item.id]}}">
							<lyte-yield yield-name = "connection" connection = {{_item}}></lyte-yield>
						</lyte-connect-item>
					<%})%>
				</lyte-connect-item>
			<%}else{%>
				<lyte-connect-item id = "{{ltPropIdPrefix}}{{item.id}}" class = {{item.class}} data-index = {{index}} style = "{{construct_style(item.position)}}" onmouseenter = "{{action('mouseenter',this,event)}}" onmouseleave = "{{action('mouseleave',this,event)}}" lt-prop-item = "{{details[item.id]}}">
					<lyte-yield yield-name = "connection" connection = {{item}}></lyte-yield>
				</lyte-connect-item>
		<%}})%>

		<svg xmlns="http://www.w3.org/2000/svg" class = "lyteConnectionMarker" width = {{ltPropWidth}} height = {{ltPropHeight}} viewBox = {{viewBox}} style = "{{styleValue}}">
			  <defs>
			  	<marker id = "lyteConnectionTailMarker" markerUnits = "strokeWidth" markerWidth = 12 markerHeight = 12 refX =12 refY = 6 orient = "auto">
			  		<path d = "M 12 6 L 6 6 12 0 M 6 6 L 12 12" stroke = "green" fill = "white"></path>
			  		<ellipse cx = 6 cy = 6 rx = 2 ry = 2 fill = "white" stroke = "green"></ellipse>
			  	</marker>
			  </defs>
		</svg>
		<%if(ltPropSmartGuide){%>
			<div class="lyteSmartGuides lyteConnectHorizontal lyteConnectHiddenElem"></div>
			<div class="lyteSmartGuides lyteConnectVertical lyteConnectHiddenElem"></div>
		<%}%>
	</div>
	<%if(ltPropPreview){%>
		<lyte-wormhole class = "lyteConnectWormhole" lt-prop-query = {{ltPropQuery}} on-before-append = "{{method('wormhole')}}">
			<template is = "registerYield" yield-name = "lyte-content">
				<div class = "lyteConnectPreview" onmousedown = "{{action('preview_down',event)}}" ontouchstart = "{{action('preview_down',event)}}" onclick="{{action('preview_click',event)}}">
					<svg class = "lytePreviewSvg" width = "100%" height = "100%" viewBox = "0 0 1848 606" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio = "none">
						<foreignObject class = "lytePreviewForeignObject" width = "100%" height = "100%">
							<%details.forIn( function( value, key ){%>
									<div id = "preview_{{key}}" class="lytePreviewElement {{value.data.class}}" style = "{{construct_style(value.position)}}">
										<%if(value.data.type == "groupshape"){
											value.children.forIn( function( _value, _key ){%>
												<div id = "preview_{{_key}}" class="lytePreviewElement lyteChildPreview" style = "{{construct_style(_value.position)}}">
													<lyte-yield yield-name = "preview" data = {{_value.data}} module_id = {{_key}}></lyte-yield>
												</div>
											<%})
										}else{%>
											<lyte-yield yield-name = "preview" data = {{value.data}} module_id = {{key}}></lyte-yield>
										<%}%>
									</div>
							<%})%>
						</foreignObject>
					</svg>
					<div class = "lyteConnectOverlay"></div>
				</div>
			</template>
		</lyte-wormhole>
	<%}%>
</template>