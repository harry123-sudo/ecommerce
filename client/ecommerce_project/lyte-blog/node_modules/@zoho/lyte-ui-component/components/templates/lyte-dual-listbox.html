<template tag-name="lyte-dual-listbox">
  <div class="lyteListboxWrapper">
    <div class="lyteListboxLeftPanel lyteListboxPanels">
      <lyte-search class="lyteListBoxSearch" lt-prop-query-selector='{"scope" : ".{{ltPropSearchScope}}", "search" : ".lyteLBMandatory", "target" : ".lyteListBoxLeftWrap"}' lt-prop-check-from-parent=true lt-prop-component="duallistbox" on-search="{{method('onSearch')}}"></lyte-search>
      <% ltPropLeftData.forEach(function(item, index){%>
      <% if(item.childrenList){ %>
      <div class="lyteListBoxLeftWrap {{if(item.childrenList.length===0,'lyteLBoxDisabledParent','')}} {{if(childitem.required,'lyteListBoxRequiredParent','')}}">
        <div class="lyteListBoxLeftElement lyteListBoxLeftParentElement lyteLeftLvl1 {{if(item.required,'lyteListBoxRequiredItem','')}} {{if(item.childrenList.length===0,'lyteLBoxDisabledParent','')}}" ondblclick="{{action('moveElementRight' , this , 'doubleClick')}}"
          onclick="{{action('elementFN' , this , event)}}" index="{{lyteListBoxIndex(index)}}">
          <lyte-lb-collapse onclick="{{action('collapseFunction' , this , 'left')}}"></lyte-lb-collapse>
          <lyte-yield yield-name="leftWidget" left-widget-value={{item}}></lyte-yield>
          <lyte-lb-add class="lyteLbAdd" lyte-if={{!item.required}} onclick="{{action('addElementToRight' , this)}}"></lyte-lb-add>
        </div>
        <div class="lyteLBLeftChildWrap">
          <% item.childrenList.forEach(function(childitem , ind){ %>
          <div class="lyteListBoxLeftWrap lyteLeftLvl2Wrap {{if(childitem.required,'lyteListBoxRequiredParent','')}}">
            <div class="lyteListBoxLeftElement lyteLeftLvl2 {{if(childitem.required,'lyteListBoxRequiredItem','')}}" ondblclick="{{action('moveElementRight' , this , 'doubleClick')}}" onclick="{{action('elementFN' , this, event)}}" index="{{lyteListBoxIndex(ind , index)}}">
              <lyte-yield yield-name="leftWidget" left-widget-value={{childitem}}></lyte-yield>
              <lyte-lb-add class="lyteLbAdd" lyte-if={{!childitem.required}} onclick="{{action('addElementToRight' , this)}}"></lyte-lb-add>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
      <% } else { %>
      <div class="lyteListBoxLeftWrap {{if(item.required,'lyteListBoxRequiredParent','')}}">
        <div class="lyteListBoxLeftElement lyteLeftLvl1 {{if(item.required,'lyteListBoxRequiredItem','')}}" ondblclick="{{action('moveElementRight' , this , 'doubleClick')}}" onclick="{{action('elementFN' , this, event)}}" index="{{lyteListBoxIndex(index)}}">
          <lyte-yield yield-name="leftWidget" left-widget-value={{item}}></lyte-yield>
          <lyte-lb-add class="lyteLbAdd" lyte-if={{!item.required}} onclick="{{action('addElementToRight' , this)}}"></lyte-lb-add>
        </div>
      </div>
      <% } %>
      <% }) %>
      <div class="lyteListBoxNoResultsFound" lyte-if="{{noResultsFound}}">{{ltPropNoResultMessage}}</div>
    </div>
    <div class="lyteListboxToolbar" lyte-if="{{ltPropShowToolbar}}">
      <div class="lyteLBToolbarItems lyteLBTBMoveRight" lyte-if={{moveRight}} onclick="{{action('moveElementRight' , this , 'toolbarClick')}}" lt-prop-title="Move Right" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
      <div class="lyteLBToolbarItems lyteLBTBMoveLeft" lyte-if={{moveLeft}} onclick="{{action('moveElementLeft' , this , 'toolbarClick')}}" lt-prop-title="Move Left" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
      <div class="lyteLBToolbarItems lyteLBTBMoveUp" lyte-if={{moveTop}} onclick="{{action('moveElementUp')}}" lt-prop-title="Move Up" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
      <div class="lyteLBToolbarItems lyteLBTBMoveDown" lyte-if={{moveBottom}} onclick="{{action('moveElementDown')}}" lt-prop-title="Move Down" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
      <!-- <div class="lyteLBToolbarItems lyteLBTBMoveAllRight" onclick="{{action('moveAllElementsRight')}}"> ar </div> -->
      <!-- <div class="lyteLBToolbarItems lyteLBTBMoveAllLeft" onclick="{{action('moveAllElementsLeft')}}"> al </div> -->
      <div class="lyteLBToolbarItems lyteLBTBDeleteMarked" lyte-if={{deleteElement}} onclick="{{action('deleteElement')}}" lt-prop-title="Delete" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
    </div>
    <div class="lyteListboxRightPanel lyteListboxPanels">
      <% ltPropRightData.forEach(function(item, index){%>
      <div class="lyteListBoxRightWrap {{if(item.required,'lyteListBoxRequiredParent','')}}">
        <div class="lyteListBoxRightElement lyteRightLvl1 {{if(item.required,'lyteListBoxRequiredItem','')}}" ondblclick="{{action('moveElementLeft' , this , 'doubleClick')}}" onclick="{{action('elementFN' , this, event)}}" index="{{lyteListBoxIndex(index)}}"
          setParent="{{lyteListBoxParentIndex(this , item , ltPropAssociateParent)}}">
          <lyte-yield yield-name="rightWidget" right-widget-value={{item}}></lyte-yield>
          <lyte-lb-remove class="lyteLbAdd" lyte-if={{!item.required}} onclick="{{action('removeElementFromRight' , this)}}"></lyte-lb-remove>
        </div>
      </div>
      <% }) %>
    </div>
    <!-- <lyte-badge class="lyteListboxBadge" lyte-if={{moreLBElements}} lt-prop-position=topRight></lyte-badge> -->
    <lyte-badge class="lyteListboxBadge" lyte-if={{moreLBElements}} lt-prop-position='topRight' lt-prop-max-length=3></lyte-badge>
  </div>
</template>
